<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Counting</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* Font Import and Base Styles */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        
        body {
            /* Font family: Inter, sans-serif */
            font-family: 'Inter', sans-serif;
            background-color: #ffffff; /* Global background: White */
        }

        /* --- Input Arrow Removal (User Request) --- */
        /* Hide number input arrows for WebKit/Blink browsers (Chrome, Safari, Edge) */
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        /* Hide number input arrows for Firefox */
        input[type=number] {
            -moz-appearance: textfield;
        }

        /* --- Block Sizing and Appearance --- */

        /* Responsive Font Sizing for Blocks (Base Unit Adjustment) */
        /* Increased base font size for larger, clearer blocks in the single display area */
        #single-card-display {
            font-size: 15px; /* Base size for mobile blocks */
        }
        @media (min-width: 640px) {
            #single-card-display {
                font-size: 18px; /* Larger size for desktop blocks */
            }
        }
        
        /* Ones Blocks (Squares) - Blue: #0f6bb4 (1 unit) */
        .one-block {
            width: 0.7em; 
            height: 0.7em;
            background-color: #0f6bb4; 
            box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
            border: 1px solid #094777; 
        }

        /* Tens Blocks (Stacks) - Green: #12a553 (10 units) */
        .ten-block {
            width: 0.7em; 
            height: 7em; /* 10 * 0.7em */
            background-color: #12a553; 
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
            border: 1px solid #0a6936;
        }

        /* Hundreds Block (Plates) - Burnt Orange: #cc5500 (100 units) */
        .hundred-block {
            width: 7em;  /* 10 * 0.7em */
            height: 7em; /* 10 * 0.7em */
            background-color: #cc5500;
            box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.3);
            border: 1px solid #994000;
            margin-right: 1.5em; /* Space from other units */
        }

        /* Block Layout Wrappers */
        .tens-wrapper {
            display: flex;
            gap: 0.3em;
            margin-right: 1.0em;
        }

        .ones-wrapper {
            display: flex;
            flex-wrap: wrap;
            gap: 0.3em;
            max-width: 5em;
        }

        /* Single Card Display */
        #single-card-display {
            min-height: 200px; /* Ensure sufficient vertical space */
            aspect-ratio: 16 / 9; /* Make the display area wider for better block visualization */
            background-color: #f7f7f7;
        }

        /* Utility to make the blocks render neatly inside the display */
        .block-display {
            min-height: 8em; 
            align-items: flex-end;
            display: flex; 
            justify-content: center;
        }
        
        /* --- Custom Utility Classes (for color hardcoding) --- */

        /* Text Colors */
        .text-main-blue {
            color: #0f6bb4 !important;
        }
        .text-main-green {
            color: #12a553 !important;
        }
        .text-burnt-orange {
             color: #cc5500 !important;
        }

        /* Background Colors for Buttons/Elements */
        .bg-main-blue {
            background-color: #0f6bb4;
        }
        .bg-main-blue:hover {
            background-color: #0a4f77;
        }

        /* Problem Area Background */
        .bg-light-blue-area {
            background-color: #e6f0f7;
        }

        /* Success/Error Feedback */
        .text-feedback-green {
            color: #10b981;
        }
        .text-feedback-red {
            color: #dc2626;
        }
    </style>
</head>
<body class="min-h-screen flex items-start justify-center p-4 sm:p-8">
    <div id="game-container" class="w-full max-w-xl bg-white rounded-xl shadow-2xl p-6 sm:p-8">
        
        <!-- Header, Score, and Rules Button -->
        <div class="text-center mb-6">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">Count the Blocks</h1>
            
            <div id="score-display" class="mt-2 text-xl font-semibold text-main-blue">Score: 0</div>
            
            <button id="show-rules-button" class="mt-4 text-sm font-semibold text-white py-2 px-4 rounded-lg shadow-md transition duration-150 bg-main-blue">
                Show Rules
            </button>
        </div>

        <!-- Block Display Area -->
        <div id="single-card-display" class="p-4 rounded-xl shadow-md border-2 border-gray-200 mb-6">
            <!-- Blocks will be rendered here -->
        </div>

        <!-- Input Area and Check Button -->
        <div class="text-center p-4">
            <label for="user-input" class="text-xl font-semibold text-gray-700 block mb-3">What number is shown?</label>
            <div class="flex flex-col sm:flex-row justify-center items-center space-y-3 sm:space-y-0 sm:space-x-3">
                <!-- Input max attribute is 299 for the new MAX_NUMBER limit -->
                <input type="number" id="user-input" placeholder="Enter your count" class="p-3 border-2 border-gray-300 rounded-lg text-center text-2xl font-bold w-full sm:w-40 focus:border-main-blue focus:ring-1 focus:ring-main-blue" min="0" max="299">
                <button id="check-button" class="bg-main-blue text-white font-bold py-3 px-6 rounded-lg shadow-lg transition duration-200 w-full sm:w-auto">
                    Check
                </button>
            </div>
            <!-- Status Message Area -->
            <div id="status-message" class="mt-4 text-lg font-semibold min-h-[1.5rem]"></div>
        </div>

        <!-- Rules Modal -->
        <div id="rules-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
            <div class="bg-white p-8 rounded-xl shadow-3xl w-full max-w-md transform transition-all duration-300 scale-95">
                <h3 class="text-3xl font-bold text-main-blue mb-4 border-b pb-2">Game Rules</h3>
                <div class="text-gray-700 space-y-3 mb-6">
                    <p>The goal is to match the number shown by correctly counting the value of the colored blocks and entering the number.</p>
                    
                    <p class="font-semibold text-lg">Block Values:</p>
                    <!-- RULES SIMPLIFIED as requested -->
                    <ul class="list-none ml-0 space-y-2 text-left">
                        <li class="text-gray-700"><span class="font-bold text-burnt-orange">Orange Plates:</span> 100</li>
                        <li class="text-gray-700"><span class="font-bold text-main-green">Green Stacks:</span> 10</li>
                        <li class="text-gray-700"><span class="font-bold text-main-blue">Blue Squares:</span> 1</li>
                    </ul>
                    
                    <p class="pt-2">Keep guessing until you find the correct number!</p>
                </div>
                <button id="close-rules-button" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg transition duration-200">
                    Close
                </button>
            </div>
        </div>

    </div>

    <script>
        // Global state
        let currentTargetNumber = 0;
        let score = 0;
        
        // Configuration
        const MAX_NUMBER = 299; // Maximum number is 299
        const MIN_NUMBER = 11; 
        
        // DOM elements
        const singleCardDisplay = document.getElementById('single-card-display');
        const scoreDisplayEl = document.getElementById('score-display');
        const userInput = document.getElementById('user-input');
        const checkButton = document.getElementById('check-button');
        const statusMessageEl = document.getElementById('status-message');
        
        // Rules Modal Elements
        const showRulesButton = document.getElementById('show-rules-button');
        const rulesModal = document.getElementById('rules-modal');
        const closeRulesButton = document.getElementById('close-rules-button');


        // --- Rules Modal Logic ---
        showRulesButton.addEventListener('click', () => {
            rulesModal.classList.remove('hidden');
        });

        closeRulesButton.addEventListener('click', () => {
            rulesModal.classList.add('hidden');
        });
        // -------------------------


        /**
         * Generates the HTML for the block visualization based on hundreds, tens, and ones counts.
         */
        function renderBlocks(hundreds, tens, ones) {
            let hundredsHTML = '';
            for (let i = 0; i < hundreds; i++) {
                hundredsHTML += `<div class="hundred-block rounded-md"></div>`;
            }

            let tensHTML = '';
            for (let i = 0; i < tens; i++) {
                tensHTML += `<div class="ten-block rounded-md"></div>`;
            }

            let onesHTML = '';
            // Display ones as a wrapped group
            for (let i = 0; i < ones; i++) {
                onesHTML += `<div class="one-block rounded-sm"></div>`;
            }

            return `
                <div class="block-display">
                    <!-- Hundreds Blocks (Plates) -->
                    <div class="hundreds-wrapper flex gap-0.5">${hundredsHTML}</div>
                    <!-- Tens Blocks (Stacks) -->
                    <div class="tens-wrapper">${tensHTML}</div>
                    <!-- Ones Blocks (Squares) -->
                    <div class="ones-wrapper">${onesHTML}</div>
                </div>
            `;
        }
        
        /**
         * Starts a new counting problem.
         */
        function generateProblem() {
            // Pick a random number between MIN_NUMBER (11) and MAX_NUMBER (299)
            currentTargetNumber = Math.floor(Math.random() * (MAX_NUMBER - MIN_NUMBER + 1)) + MIN_NUMBER;
            
            // Decompose the target number for rendering
            const hundreds = Math.floor(currentTargetNumber / 100);
            const tens = Math.floor((currentTargetNumber % 100) / 10);
            const ones = currentTargetNumber % 10;
            
            // Render the blocks
            singleCardDisplay.innerHTML = renderBlocks(hundreds, tens, ones);
            
            // Clear input and feedback
            userInput.value = '';
            statusMessageEl.textContent = '';
            userInput.focus();
        }

        /**
         * Handles the user's answer submission.
         */
        function checkAnswer() {
            const inputValue = parseInt(userInput.value, 10);
            
            // Input validation
            if (isNaN(inputValue)) {
                statusMessageEl.textContent = "Please enter a number.";
                statusMessageEl.classList.remove('text-feedback-green');
                statusMessageEl.classList.add('text-feedback-red');
                return;
            }

            if (inputValue === currentTargetNumber) {
                // CORRECT ANSWER LOGIC
                score++;
                scoreDisplayEl.textContent = `Score: ${score}`;

                statusMessageEl.textContent = `Correct! ${currentTargetNumber} is the right count. Generating new problem...`;
                statusMessageEl.classList.remove('text-feedback-red');
                statusMessageEl.classList.add('text-feedback-green');
                
                // Disable button and input briefly
                checkButton.disabled = true;
                userInput.disabled = true;

                // Delay before generating the next problem
                setTimeout(() => {
                    checkButton.disabled = false;
                    userInput.disabled = false;
                    generateProblem();
                }, 1500);

            } else {
                // INCORRECT ANSWER LOGIC
                statusMessageEl.textContent = "Incorrect. Try counting again!";
                statusMessageEl.classList.remove('text-feedback-green');
                statusMessageEl.classList.add('text-feedback-red');
                
                // Clear input for easy re-entry
                userInput.value = ''; 
                userInput.focus();
            }
        }
        
        // Event listener for the Check button
        checkButton.addEventListener('click', checkAnswer);
        
        // Allow pressing Enter key to check answer
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });

        // Initial setup
        window.onload = generateProblem;

    </script>
</body>
</html>
